# TODO(jcwc): Consider changing this to a FutureObject when cluster-scoped resources are supported
apiVersion: configmanagement.gke.io/v1
kind: ConfigManagement
metadata:
  name: config-management
  namespace: yakima-system # {"$kpt-set":"namespace"}
spec:
  clusterName: my-yakima-cluster # {"$kpt-set":"cluster-name"}
  git:
    syncRepo: https://source.developers.google.com/p/my-project-id/r/deployment-repo # {"$kpt-set":"config-sync-repo"}
    syncBranch: master
    secretType: gcenode
    policyDir: config
  sourceFormat: unstructured
  patches:
    - apiVersion: v1
      kind: ServiceAccount
      metadata:
        name: importer
        namespace: config-management-system
        annotations:
          iam.gke.io/gcp-service-account: 1234567890123-compute@developer.gserviceaccount.com # {"$kpt-set":"compute-sa-importer"}
