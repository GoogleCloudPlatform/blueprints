# ClusterRole to allow read access of all CNRM resources in a namespace.
# Similar to the cnrm-admin ClusterRole, but read-only, to allow cross-namespace resource references.
# TODO: Upstream to Config Connector
# https://github.com/GoogleCloudPlatform/k8s-config-connector/issues/407
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  # Avoid using the obvious "cnrm-viewer" name, to allow CNRM to safely add it in an admin cluster upgrade.
  name: cnrm-viewer-landing-zone
rules:
- apiGroups:
  - accesscontextmanager.cnrm.cloud.google.com
  - artifactregistry.cnrm.cloud.google.com
  - bigquery.cnrm.cloud.google.com
  - bigtable.cnrm.cloud.google.com
  - cloudbuild.cnrm.cloud.google.com
  - compute.cnrm.cloud.google.com
  - container.cnrm.cloud.google.com
  - dataflow.cnrm.cloud.google.com
  - dns.cnrm.cloud.google.com
  - firestore.cnrm.cloud.google.com
  - gameservices.cnrm.cloud.google.com
  - iam.cnrm.cloud.google.com
  - kms.cnrm.cloud.google.com
  - logging.cnrm.cloud.google.com
  - monitoring.cnrm.cloud.google.com
  - pubsub.cnrm.cloud.google.com
  - redis.cnrm.cloud.google.com
  - resourcemanager.cnrm.cloud.google.com
  - secretmanager.cnrm.cloud.google.com
  - servicenetworking.cnrm.cloud.google.com
  - serviceusage.cnrm.cloud.google.com
  - sourcerepo.cnrm.cloud.google.com
  - spanner.cnrm.cloud.google.com
  - sql.cnrm.cloud.google.com
  - storage.cnrm.cloud.google.com
  - storagetransfer.cnrm.cloud.google.com
  resources:
  - '*'
  verbs:
  - get
  - list
  - watch
