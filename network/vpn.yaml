apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeVPNGateway
metadata:
  name: vpn-prod-gw
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  description: "Compute VPN Gateway Sample"
  region: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  networkRef:
    name: network-prefix-prod # {"$ref":"#/definitions/io.k8s.cli.substitutions.network-prod:"}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeVPNTunnel
metadata:
  name: vpn-prod-tunnel
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  peerIp: "15.0.0.120"
  region: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  sharedSecret:
    valueFrom:
    secretKeyRef:
      name: vpn-prod-secret
      key: sharedSecret
  targetVPNGatewayRef:
    name: vpn-prod-gw
  localTrafficSelector:
    - "192.168.0.0/16"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: vpn-prod-address
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  location: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  description: "a test regional address"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeForwardingRule
metadata:
  name: vpn-prod-tunnel-fw-rule
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  description: "A regional forwarding rule"
  target:
    targetVPNGatewayRef:
      name: vpn-prod-gw
  ipProtocol: "ESP"
  location: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  ipAddress:
    addressRef:
      name: vpn-prod-address
---
apiVersion: v1
kind: Secret
metadata:
  name: vpn-prod-secret
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
stringData:
  sharedSecret:  vpn-prod-secret  # {"$ref":"#/definitions/io.k8s.cli.setters.vpn-prod-secret"}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
  kind: ComputeVPNGateway
  metadata:
    name: vpn-nonprod-gw
    namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
  spec:
    description: "Compute VPN Gateway Sample"
    region: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
    networkRef:
      name: network-prefix-nonprod # {"$ref":"#/definitions/io.k8s.cli.substitutions.network-nonprod:"}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeVPNTunnel
metadata:
  name: vpn-nonprod-tunnel
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  peerIp: "15.0.0.120"
  region: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  sharedSecret:
    valueFrom:
    secretKeyRef:
      name: vpn-nonprod-secret
      key: sharedSecret
  targetVPNGatewayRef:
    name: vpn-nonprod-gw
  localTrafficSelector:
    - "192.168.0.0/16"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: vpn-nonprod-address
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  location: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  description: "a test regional address"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeForwardingRule
metadata:
  name: vpn-nonprod-tunnel-fw-rule
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  description: "A regional forwarding rule"
  target:
    targetVPNGatewayRef:
      name: vpn-nonprod-gw
  ipProtocol: "ESP"
  location: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  ipAddress:
    addressRef:
      name: vpn-nonprod-address
---
apiVersion: v1
kind: Secret
metadata:
  name: vpn-nonprod-secret
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
stringData:
  sharedSecret:  vpn-nonprod-secret  # {"$ref":"#/definitions/io.k8s.cli.setters.vpn-nonprod-secret"}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeVPNGateway
metadata:
  name: vpn-dev-gw
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  description: "Compute VPN Gateway Sample"
  region: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  networkRef:
    name: network-prefix-dev # {"$ref":"#/definitions/io.k8s.cli.substitutions.network-dev:"}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeVPNTunnel
metadata:
  name: vpn-dev-tunnel
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  peerIp: "15.0.0.120"
  region: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  sharedSecret:
    valueFrom:
    secretKeyRef:
      name: vpn-dev-secret
      key: sharedSecret
  targetVPNGatewayRef:
    name: vpn-dev-gw
  localTrafficSelector:
    - "192.168.0.0/16"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: vpn-dev-address
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  location: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  description: "a test regional address"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeForwardingRule
metadata:
  name: vpn-dev-tunnel-fw-rule
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  description: "A regional forwarding rule"
  target:
    targetVPNGatewayRef:
      name: vpn-dev-gw
  ipProtocol: "ESP"
  location: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  ipAddress:
    addressRef:
      name: vpn-dev-address
---
apiVersion: v1
kind: Secret
metadata:
  name: vpn-dev-secret
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
stringData:
  sharedSecret:  vpn-dev-secret  # {"$ref":"#/definitions/io.k8s.cli.setters.vpn-dev-secret"}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeVPNGateway
metadata:
  name: vpn-shared-svc-gw
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  description: "Compute VPN Gateway Sample"
  region: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  networkRef:
    name: network-prefix-shared-svc # {"$ref":"#/definitions/io.k8s.cli.substitutions.network-shared-svc:"}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeVPNTunnel
metadata:
  name: vpn-shared-svc-tunnel
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  peerIp: "15.0.0.120"
  region: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  sharedSecret:
    valueFrom:
    secretKeyRef:
      name: vpn-shared-svc-secret
      key: sharedSecret
  targetVPNGatewayRef:
    name: vpn-shared-svc-gw
  localTrafficSelector:
    - "192.168.0.0/16"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: vpn-shared-svc-address
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  location: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  description: "a test regional address"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeForwardingRule
metadata:
  name: vpn-shared-svc-tunnel-fw-rule
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
spec:
  description: "A regional forwarding rule"
  target:
    targetVPNGatewayRef:
      name: vpn-shared-svc-gw
  ipProtocol: "ESP"
  location: region  # {"$ref":"#/definitions/io.k8s.cli.setters.region"}
  ipAddress:
    addressRef:
      name: vpn-shared-svc-address
---
apiVersion: v1
kind: Secret
metadata:
  name: vpn-shared-svc-secret
  namespace: networks-namespace # {"$ref":"#/definitions/io.k8s.cli.setters.networks-namespace"}
stringData:
  sharedSecret:  vpn-shared-svc-secret  # {"$ref":"#/definitions/io.k8s.cli.setters.vpn-shared-svc-secret"}