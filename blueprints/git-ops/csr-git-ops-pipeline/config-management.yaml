apiVersion: configmanagement.gke.io/v1
kind: ConfigManagement
metadata:
  name: config-management
  namespace: yakima-system # {"$kpt-set":"namespace"}
spec:
  clusterName: my-yakima-cluster # {"$kpt-set":"cluster-name"}
  git:
    syncRepo: https://source.developers.google.com/p/my-project-id/r/deployment-repo # {"$kpt-set":"config-sync-repo"}
    syncBranch: main
    secretType: gcenode
    policyDir: config
  sourceFormat: unstructured
  patches:
    - apiVersion: v1
      kind: ServiceAccount
      metadata:
        name: importer
        namespace: config-management-system
        annotations:
          iam.gke.io/gcp-service-account: config-sync-sa@my-project-id.iam.gserviceaccount.com # {"$kpt-set":"config-sync-sa-importer"}
